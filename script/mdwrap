#!/use/bin/perl

use strict;
use warnings;
use Getopt::Long;
use App::Markdown::Wrap;
use open ':std', ':encoding(UTF-8)';

my %default_opts = (
  "line-width"       => 80,
  "tonewsboat"       => 0,
  "wrap-sentence"    => 0,
  "keep-origin-wrap" => 0,
  "lang"             => "zh",
);

my %opts;
GetOptions( \%opts, "line-width|w=i", "tonewsboat", "wrap-sentence", "keep-origin-wrap", "lang=s", "help|h" );

if ( $opts{help} ) {
  print <<'EOF';
Usage: mdwrap [options] [file]

Options:
  -w, --line-width <n>     Set line width (default: 80)
      --tonewsboat         Format for newsboat
      --wrap-sentence      Wrap by sentence
      --keep-origin-wrap   Keep original wrapping
      --lang <lang>        Language (default: zh)
  -h, --help               Show this help message
EOF
  exit 0;
}

App::Markdown::Wrap->run( { %default_opts, %opts }, @ARGV );

